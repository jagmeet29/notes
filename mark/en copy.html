<!DOCTYPE html>
<html>
  <head>
    <title>Markdown Example</title>
    <!-- Include the marked library (e.g., via CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Or link to a local copy: <script src="/path/to/marked.min.js"></script> -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </head
  ><style>
    /* Optional: Add some basic styling for better presentation */
    body {
      font-family: sans-serif;
      line-height: 1.6;
      padding: 20px;
    }
    .markdown-content {
      border: 1px solid #ccc;
      padding: 15px;
      
      background-color: #f9f9f9;
    }
    /* Style some common markdown elements */
    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3 {
      margin-top: 1em;
      margin-bottom: 0.5em;
      border-bottom: 1px solid #eee;
      padding-bottom: 0.3em;
    }
    .markdown-content code {
      background-color: #eee;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: monospace;
    }
    .markdown-content pre code {
      background-color: transparent;
      padding: 0;
    }
    .markdown-content pre {
      background-color: #eee;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto; /* Handle long lines of code */
    }
    .markdown-content blockquote {
      border-left: 4px solid #ccc;
      padding-left: 10px;
      color: #666;
      margin-left: 0;
    }
    .markdown-content ul,
    .markdown-content ol {
      padding-left: 25px;
    }
  </style>
  <body>
    <script>
      // Wait for the DOM to be fully loaded (optional but good practice)
      document.addEventListener("DOMContentLoaded", (event) => {
        // Select all div elements with the class 'markdown-content'
        const markdownDivs = document.querySelectorAll(".markdown-content");

        // Check if marked is loaded (optional but good error handling)
        if (typeof marked === "undefined") {
          console.error(
            "Marked library is not loaded. Make sure to include marked.min.js before this script."
          );
          return; // Stop execution if marked is missing
        }

        // Iterate over each selected div
        markdownDivs.forEach((div) => {
          // Get the raw Markdown text from the div's content
          // textContent is generally preferred
          const markdownText = div.textContent;

          // Basic check if there's any text to convert
          if (markdownText && markdownText.trim()) {
            try {
              // Convert the Markdown text to HTML using marked.parse()
              // Consider configuring marked for security if needed:
              // marked.setOptions({ sanitize: true }); // Older versions might need this explicitly
              const htmlContent = marked.parse(markdownText);

              // Replace the div's original content with the generated HTML
              div.innerHTML = htmlContent;
            } catch (e) {
              console.error("Error parsing Markdown for div:", div, e);
              // Optionally display an error message in the div itself
              // div.innerHTML = "<p style='color: red;'>Error parsing Markdown.</p>";
            }
          } else {
            // Optional: Handle empty divs if necessary
            // console.log("Skipping empty markdown-content div:", div);
          }
        });
      });
    </script>
    <div class="markdown-content">
   # Hello World 
   This is *Markdown* text inside a div.
   - Item 1 
   - Item 2
    </div>
   <center> \( E = mc^2 \).</center>
    <div class="markdown-content">Another **section** here. `inline code`</div>

    <!-- Your script (can be inline or in a separate file) -->
    
  </body>
</html>
